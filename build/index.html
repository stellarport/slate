
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Stellarport A3S Reference</title>

    <link href="images/favicon.ico" rel="icon" type="image/ico" />

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#how-it-works" class="toc-h1 toc-link" data-title="How It Works">How It Works</a>
          </li>
          <li>
            <a href="#rate-limiting" class="toc-h1 toc-link" data-title="Rate Limiting">Rate Limiting</a>
          </li>
          <li>
            <a href="#security" class="toc-h1 toc-link" data-title="Security">Security</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#relay-client" class="toc-h2 toc-link" data-title="Relay Client">Relay Client</a>
                  </li>
                  <li>
                    <a href="#account-client" class="toc-h2 toc-link" data-title="Account Client">Account Client</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#response-signing" class="toc-h1 toc-link" data-title="Response Signing">Response Signing</a>
          </li>
          <li>
            <a href="#notification-confirmation" class="toc-h1 toc-link" data-title="Notification Confirmation">Notification Confirmation</a>
          </li>
          <li>
            <a href="#idempotency" class="toc-h1 toc-link" data-title="Idempotency">Idempotency</a>
          </li>
          <li>
            <a href="#a3s-api" class="toc-h1 toc-link" data-title="A3S API">A3S API</a>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting Started">Getting Started</a>
          </li>
          <li>
            <a href="#client-types" class="toc-h1 toc-link" data-title="Client Types">Client Types</a>
          </li>
          <li>
            <a href="#environments" class="toc-h1 toc-link" data-title="Environments">Environments</a>
          </li>
          <li>
            <a href="#tokens" class="toc-h1 toc-link" data-title="Tokens">Tokens</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-challenge" class="toc-h2 toc-link" data-title="Get Challenge">Get Challenge</a>
                  </li>
                  <li>
                    <a href="#get-token" class="toc-h2 toc-link" data-title="Get Token">Get Token</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#info" class="toc-h1 toc-link" data-title="Info">Info</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-info" class="toc-h2 toc-link" data-title="Get Info">Get Info</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#transactions" class="toc-h1 toc-link" data-title="Transactions">Transactions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-transactions" class="toc-h2 toc-link" data-title="Get Transactions">Get Transactions</a>
                  </li>
                  <li>
                    <a href="#get-one-transaction" class="toc-h2 toc-link" data-title="Get One Transaction">Get One Transaction</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#deposit" class="toc-h1 toc-link" data-title="Deposit">Deposit</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-deposit-instructions" class="toc-h2 toc-link" data-title="Get Deposit Instructions">Get Deposit Instructions</a>
                  </li>
                  <li>
                    <a href="#notify-deposit-received" class="toc-h2 toc-link" data-title="Notify Deposit Received">Notify Deposit Received</a>
                  </li>
                  <li>
                    <a href="#notify-deposit-confirmed" class="toc-h2 toc-link" data-title="Notify Deposit Confirmed">Notify Deposit Confirmed</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#withdrawal" class="toc-h1 toc-link" data-title="Withdrawal">Withdrawal</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-withdrawal-instructions" class="toc-h2 toc-link" data-title="Get Withdrawal Instructions">Get Withdrawal Instructions</a>
                  </li>
                  <li>
                    <a href="#notify-withdrawal-sent" class="toc-h2 toc-link" data-title="Notify Withdrawal Sent">Notify Withdrawal Sent</a>
                  </li>
                  <li>
                    <a href="#notify-withdrawal-confirmed" class="toc-h2 toc-link" data-title="Notify Withdrawal Confirmed">Notify Withdrawal Confirmed</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#relay-server-api" class="toc-h1 toc-link" data-title="Relay Server API">Relay Server API</a>
          </li>
          <li>
            <a href="#getting-started-2" class="toc-h1 toc-link" data-title="Getting Started">Getting Started</a>
          </li>
          <li>
            <a href="#authentication-2" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#kyc" class="toc-h1 toc-link" data-title="KYC">KYC</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#upload-kyc" class="toc-h2 toc-link" data-title="Upload KYC">Upload KYC</a>
                  </li>
                  <li>
                    <a href="#delete-kyc" class="toc-h2 toc-link" data-title="Delete KYC">Delete KYC</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#deposit-2" class="toc-h1 toc-link" data-title="Deposit">Deposit</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#deposit-destination" class="toc-h2 toc-link" data-title="Deposit Destination">Deposit Destination</a>
                  </li>
                  <li>
                    <a href="#deposit-instructions" class="toc-h2 toc-link" data-title="Deposit Instructions">Deposit Instructions</a>
                  </li>
                  <li>
                    <a href="#get-deposit" class="toc-h2 toc-link" data-title="Get Deposit">Get Deposit</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#withdrawal-2" class="toc-h1 toc-link" data-title="Withdrawal">Withdrawal</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#withdrawal-destination" class="toc-h2 toc-link" data-title="Withdrawal Destination">Withdrawal Destination</a>
                  </li>
                  <li>
                    <a href="#withdrawal-instructions" class="toc-h2 toc-link" data-title="Withdrawal Instructions">Withdrawal Instructions</a>
                  </li>
                  <li>
                    <a href="#get-withdrawal" class="toc-h2 toc-link" data-title="Get Withdrawal">Get Withdrawal</a>
                  </li>
                  <li>
                    <a href="#send-withdrawal" class="toc-h2 toc-link" data-title="Send Withdrawal">Send Withdrawal</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://stellarport.io'>A Service By Stellarport</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Stellarport Anchor As A Service (A3S). You can use our service to connect arbitrary assets to the Stellar network.</p>

<p>We have language bindings in JavaScript. You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='how-it-works'>How It Works</h1>
<p>A3S is a central hub that connects arbitrary assets to the Stellar network. Its job is to faithfully execute deposits and withdrawals for an arbitrary asset. To do this it communicates with a set of Relay Servers. Each asset that A3S manages is associated with a Relay Server that runs the logic specific to that asset. A3S, and a Relay Server, are the connection between the Stellar network and an asset. The responsibilities are split like so:</p>

<p>A3S:</p>

<ul>
<li>Issue tokens on the Stellar network.</li>
<li>Generate withdrawal destinations (for users to send their tokens to).</li>
<li>Sense withdrawals on the Stellar network and communicate them to the relay server.</li>
</ul>

<p>Relay Server:</p>

<ul>
<li>Generate deposit destinations (for users to send asset to).</li>
<li>Sense deposits externally and communicate them to A3S.</li>
<li>Execute withdrawals of asset as instructed by A3S.</li>
</ul>

<p>The full deposit flow is as follows:</p>

<ol>
<li>User/Client (e.g. Stellar wallet or Dapp) would like to deposit asset ABC to Stellar account XYZ. User/Client <a href="#get-deposit-instructions">requests deposit instructions</a> from A3S.</li>
<li>A3S checks if it already has a deposit destination linked to Stellar account XYZ. If not, it asks relay server for asset ABC to <a href="#deposit-destination">create a new unique deposit destination</a> which it then links to Stellar account ABC.</li>
<li>A3S <a href="#deposit-instructions">asks the relay server for deposit instructions</a> for deposit destination linked with Stellar account XYZ (e.g. fees, eta etc.).</li>
<li>A3S returns deposit instructions to User/Client (i.e. destination, fees, any additional fields that need to be filled out etc.).</li>
<li>User/Client sends deposit to provided deposit destination.</li>
<li>Relay server observes deposit has been made, and <a href="#notify-deposit-received">notifies A3S that a deposit has been recieved</a> along with the deposit destination and amount.</li>
<li>Once the deposit is confirmed, relay server <a href="#notify-deposit-received">notifies A3S that a deposit is confirmed</a> along with the deposit destination and amount.</li>
<li>A3S issues appropriate amount of ABC tokens to Stellar account XYZ. </li>
</ol>

<aside class="notice">
This is a simple case, describing a 1-to-1 issuance. A3S features certain flexibilites, too. A3S may remove deposit fees (depending on the asset settings). A3S may create the receiving Stellar account by selling some of the deposited asset on the open market to initially fund the account with the acquired XLM. A3S will also wait and sense for a trustline to be set up, and then issue the balance of the asset due the account.
</aside>

<p>The full withdrawal flow is as follows:</p>

<ol>
<li>User/Client would like to withdraw asset ABC to external account GHI. User/Client <a href="#get-withdrawal-instructions">requests withdrawal destination from A3S</a>.</li>
<li>A3S <a href="#withdrawal-instructions">requests withdrawal instructions from relay server</a> (e.g. eta and fees).</li>
<li>A3S checks if a withdrawal account/memo is already linked with external account GHI, if not it generates a new one.</li>
<li>A3S returns withdrawal instructions to User/Client (i.e. Stellar account, memo, eta, fees etc.)</li>
<li>User/Client Application sends ABC tokens on the Stellar network to withdrawal account/memo provided by A3S.</li>
<li>A3S automatically registers incoming withdrawal, and <a href="#send-withdrawal">notifies relay server to execute withdrawal</a> to external account GHI.</li>
<li>Relay server executes withdrawal to external account GHI.</li>
</ol>
<h1 id='rate-limiting'>Rate Limiting</h1>
<p>A3S&#39;s APIs are rate limited to ensure fair access for all developers. We expect that most use cases will not genuinely exceed the standard allowed rate, but if your use cases required a higher volume of requests to be serviced then please send your request to listings@stellarport.io.</p>

<p>Requests throttled by the rate limiter will be returned with a 429 Too Many Requests response. Information regarding your rate limiter quote is present on responses through the X-Ratelimit-* headers.</p>
<h1 id='security'>Security</h1><h1 id='authentication'>Authentication</h1>
<p>A3S&#39;s endpoints are authenticated for two client types:</p>

<ol>
<li>Relay Servers - relay server access a set of endpoints on A3S using a request signing method. Using their request signing key, a relay server will sign the url it is accessing and include that as a <code>Signature</code> header. A3S will check to see that the <code>Signature</code> header matches a corresponding url signed by the relay server&#39;s account signing key.</li>
<li>Accounts (or individual users) - accounts access a limited set of endpoints (just transactions and deposit/withdrawal destinations) on A3S using JSON web tokens obtained from the <a href="#get-token">token endpoint</a>.</li>
</ol>
<h2 id='relay-client'>Relay Client</h2>
<blockquote>
<p>Authentication for a relay client requires some configuration:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="p">{</span><span class="nx">A3S</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'a3s'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">a3s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A3S</span><span class="p">();</span>
<span class="nx">a3s</span>
  <span class="p">.</span><span class="nx">useProd</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">useAsRelay</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">configure</span><span class="p">({</span>
    <span class="na">secret</span><span class="p">:</span> <span class="s1">'RequestSigningSecretKey'</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Then, the SDK can be used to produce an arbitrary signature:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">connectionManager</span><span class="p">.</span><span class="nx">signUriAndQuery</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">query</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>Or fetch data using this authentication automatically under the hood:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="nx">assetIssuer</span><span class="p">,</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">});</span>
</code></pre>
<p>Relay clients (i.e. relay servers contacting A3S), authenticate by signing the url and any query parameters with a request signing secret key.</p>

<p>In practice, if you are developing a relay server, if you use the A3S sdk, all methods have the authentication built in. You do not need to manually implement this signature authentication yourself.</p>
<h2 id='account-client'>Account Client</h2>
<blockquote>
<p>Authentication for an account client requires some configuration:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="p">{</span><span class="nx">A3S</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'a3s'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">a3s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A3S</span><span class="p">();</span>
<span class="nx">a3s</span>
  <span class="p">.</span><span class="nx">useProd</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">useAsAccount</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">configure</span><span class="p">({</span>
    <span class="na">secret</span><span class="p">:</span> <span class="s1">'AccountSecretKey'</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Then, the SDK can be used to get a JWT for authentication:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">tokenProvider</span><span class="p">.</span><span class="nx">token</span><span class="p">(</span><span class="nx">assetIssuer</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>Or fetch data using this authentication automatically under the hood:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="nx">assetIssuer</span><span class="p">,</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">});</span>
</code></pre>
<p>Account clients (i.e. individual users), authenticate to A3S by proving their ownership over that specific account by signing a dummy transaction. Then, they are provided with a JSON web token specific to that account. They use that JWT to authenticate to A3S.</p>

<p>In practice, if you use the A3S sdk as an account client, all methods have the authentication built in. You do not need to manually implement this signature authentication yourself.</p>
<h1 id='response-signing'>Response Signing</h1>
<blockquote>
<p>Response signing via the SDK requires a little initial configuration:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="p">{</span><span class="nx">A3S</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'a3s'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">a3s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A3S</span><span class="p">();</span>
<span class="nx">a3s</span>
  <span class="p">.</span><span class="nx">useProd</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">useAsRelay</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">configure</span><span class="p">({</span>
    <span class="na">secret</span><span class="p">:</span> <span class="s1">'RequestSigningSecretKey'</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Then, the SDK can be used to produce a signature for an arbitrary nonce and payload:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">connectionManager</span><span class="p">.</span><span class="nx">signPayload</span><span class="p">(</span><span class="nx">nonce</span><span class="p">,</span> <span class="nx">payload</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>or use the SDK convenience method for a express request, response and payload:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">a3s</span><span class="p">.</span><span class="nx">connectionManager</span><span class="p">.</span><span class="nx">signResponsePayload</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">payload</span><span class="p">);</span>

<span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">payload</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The <code>signResponsePayload</code> convenience method expects express style request and response objects as well as a nonce parameter on the request&#39;s query object. <code>signResponsePayload</code> will automatically add the <code>Signature</code> header to the response object.</p>

<p>To verify an arbitrary response from A3S or a Relay Server:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="p">{</span><span class="nx">verifyPayloadSignature</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'a3s'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">verified</span> <span class="o">=</span> <span class="nx">verifyPayloadSignature</span><span class="p">(</span><span class="nx">signature</span><span class="p">,</span> <span class="nx">payload</span><span class="p">,</span> <span class="nx">pubKey</span><span class="p">,</span> <span class="nx">nonce</span><span class="p">);</span>
</code></pre>
<p>It is important for A3S to be able to trust responses it receives from its relay servers just as it is important for relay servers and other clients to be able to trust A3S&#39;s respones.</p>

<p>A3S uses a signature scheme for verifying responses between A3S and its relay servers. Any request to A3S or a relay server that includes a query parameter <code>nonce</code> should, in the response, include a signature of the nonce+payload by the server&#39;s signing key as a response header:</p>

<p><code>Signature: xxxx</code></p>

<aside class="notice">
In a real response, <code>xxxx</code> will be the base64 encoded signature of the payload by the server's secret key.
</aside>

<p>When either A3S or a relay server receives a response from its counterpart, it should verify the response before beliving it.</p>

<aside class="success">
In practice, if you use the A3S sdk, all methods have the message verification built in. You do not need to manually implement this verification unless you are making requests to A3S or a relay server not using the A3S sdk.
</aside>
<h1 id='notification-confirmation'>Notification Confirmation</h1>
<p>A3S confirms all notifications it receives with the relay servers. For example, if A3S receives a notification to issue a deposit, it confirms this deposit with the relay server before continuing. Relay servers should implement similar rules. Never believe a message coming in over the wire, always confirm.</p>
<h1 id='idempotency'>Idempotency</h1>
<p>A3S implements idempotency. Essentially, the timing of requests should not affect the actions of A3S. Relay servers should also implement idempotency. For example, if an attacker quickly sends two requests to a relay server to execute a withdrawal, only one withdrawal should actually be executed.</p>
<h1 id='a3s-api'>A3S API</h1>
<p>The A3S API is a superset of <a href="https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0006.md">SEP0006</a> and <a href="https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0010.md">SEP0010</a>. You should find all the endpoints in the SEP available in A3S as well as few additional endpoints.</p>
<h1 id='getting-started'>Getting Started</h1><pre class="highlight javascript tab-javascript"><code><span class="nx">npm</span> <span class="nx">install</span> <span class="nx">a3s</span>

<span class="kr">const</span> <span class="p">{</span><span class="nx">A3S</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'a3s'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">a3s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A3S</span><span class="p">();</span>
<span class="nx">a3s</span><span class="p">.</span><span class="nx">configure</span><span class="p">({</span>
    <span class="na">secret</span><span class="p">:</span> <span class="s1">'XXX'</span>
<span class="p">})</span>
</code></pre><h1 id='client-types'>Client Types</h1>
<blockquote>
<p>If you are a relay server client:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">a3s</span><span class="p">.</span><span class="nx">useAsRelay</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>If you are a regular user/account client:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">a3s</span><span class="p">.</span><span class="nx">useAsAccount</span><span class="p">();</span>
</code></pre><h1 id='environments'>Environments</h1>
<blockquote>
<p>To use the sandbox with the a3s sdk:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">a3s</span><span class="p">.</span><span class="nx">useSandbox</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>When you a ready for production:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">a3s</span><span class="p">.</span><span class="nx">useProd</span><span class="p">();</span>
</code></pre>
<p>The A3S sandbox environment is available at <code>a3s-sandbox.api.stellarport.io</code>.</p>

<p>The A3S production environment is available at <code>a3s.api.stellarport.io</code>.</p>

<p>Before getting started developing agains A3S, you might want to play around with A3S to get used to how it works. To enable you to do that, we have deployed a Testnet Ripple asset for you to play with. To access this asset, you can make calls to the A3S sandbox server while replacing all the <code>asset_issuer</code> parameters in the A3S endpoints with <code>GC6OWX3B4NSVUNKHHR6NDCBTFF7IPF6PPVCHXCD5TDTFWSB3LKB7QY55</code> and <code>asset_code</code> with <code>TXRP</code>.</p>

<p>You can get yourself some Testnet Ripple at the <a href="https://developers.ripple.com/xrp-test-net-faucet.html">testnet ripple faucet</a> and manage your testnet wallet from <a href="https://ripplerm.github.io/ripple-wallet/">this handy ripple wallet</a> (just make sure you select the testnet network).</p>

<p>Tokens will be sent to and from the Stellar mainnet (the A3S sandbox uses the Stellar mainnet due to the cheap transaction fees). You can use the <a href="https://stellarport.io">stellarport client</a> to manage your mainnet stellar wallet.</p>

<p>Once you are ready to start developing against A3S, if you are using javascript, download the <code>a3s</code> package from npm and import it into your project.</p>
<h1 id='tokens'>Tokens</h1><h2 id='get-challenge'>Get Challenge</h2>
<blockquote>
<p>The challenge endpoint returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AAAAALpcvtO6Gn93TcEt31GeLnNTjWskb7UpfevrAOh9BoZuAAAAZAAAAAAAAAABAAAAAQAAAABcHUYdAAAAAFwdR0kAAAAAAAAAAQAAAAEAAAAALrNzn3P7uWnnpjjLYhuMSaYtGs6s1Hr6RAQEwZUV2QoAAAAKAAAAGFN0ZWxsYXJwb3J0IFNhbmRib3ggYXV0aAAAAAEAAABADhmP4ne4uz72MGawF/ESFtbe5AggPu0FSKrGr4RcVLhWBYsa0gR5iypJ2/qgBTjJbTAk+TJNBM/TbhAr4Rf8EAAAAAAAAAABfQaGbgAAAEA6k8cPIDR9j0ELyQIlYYzVuxUYtb3TZA8vtoTMVJc4ApzS7CkcdubIad7ihc/d4a3hCVt0bIv9LAg4kqIv/GYC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a challenge transaction that must be signed and submitted to the <a href="#get-token">token endpoint</a>. This endpoint is for users who would like to access their data via A3S, not needed for relay servers.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://a3s.api.stellarport.io/v2/&lt;asset_issuer&gt;/authentication</code></p>
<h3 id='authorization'>Authorization</h3>
<ul>
<li>This endpoint is open to everyone.</li>
</ul>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account</td>
<td>The public key of the user account on Stellar.</td>
</tr>
</tbody></table>
<h2 id='get-token'>Get Token</h2>
<blockquote>
<p>The token endpoint returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhM3Mtc2FuZGJveC5hcGkuc3RlbGxhcnBvcnQuaW8iLCJzdWIiOiJHQVhMRzQ0N09QNTNTMlBIVVk0TVdZUTNSUkUyTUxJMloyV05JNlgySVFDQUpRTVZDWE1RVkxHTSIsImlhdCI6MTU0NTQyMjg2OCwiZXhwIjoxNTQ1NDI2NDY4LCJqdGkiOiJ0Z0tnY012QjJOeG1JUTNjcjhGaW51b0x6Q0hMWnd1LytsZWE0NHpOSS9VPSJ9.mu61GYfZqjOskPyeO96XNHaBwwIeAMFJRXxSFNhfY8nYEi9pz5bS6aHif172siH5UvZWk4MJeG6hUIKzKPf4VR6UxRmQojK8TTMmt1BkNE-O_EsZbXwDp_mqScIZNNDkjH0IGdED-Vg1OVXHNlNLjnj_qcWyXjeEjV5zx7pLdZohrwUkn8w7eB1zvgSfGE4V8woOMceLXhuv7we62D7VcoaGqFIaU487m9gDyoC8JhWU7-hZEtLhbzDBGE0GemPKTyv7uFi6helGYU6txoSjJk5-46Ob7pjtpl-NV9fsh9J42iUwQ_xoJiHOqZXwEcuPi_ejTIi_FMhU5G078EqSd-XGOeqr4uwLqJnaqvziQe9dw90OpUiYTrWYOxflzEbRoDBb1HYAnUab70B6ogEDEXRrP9HjvHxssrVycNNFfTK2wH0jip9NhWT5qx1EuDqXWfR6KOrfpRs41ZScaUPR_TwNN4FLf5cb-9VwL5OZBIqF8tvKcSuQezhr5Gk2_dnAgC9dUX2-_p7XusYc-XtiQjuHWx9upc5GyCZHGn9vs1hzn-4iaqGyP8XGf709zwLx-t6jY3KBc_tRCTP2oW_swESt2_Gs8nuFCfM1hJVVPDdvSCC5jnpaQQl1x5LuuV12TVfoQmOUFNxA2BVVsy8xT7iPbKj_fzhn8RvT92-4SJs"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a JSON web token that can be submitted as authentication to other endpoins in A3S and relay servers (for KYC upload).</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://a3s.api.stellarport.io/v2/&lt;asset_issuer&gt;/authentication</code></p>
<h3 id='authorization-2'>Authorization</h3>
<ul>
<li>This endpoint is open to everyone.</li>
</ul>
<h3 id='body-parameters'>Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction</td>
<td>The signed transaction obtained from the <a href="#challenge-endpoint">challenge endpoint</a>.</td>
</tr>
</tbody></table>
<h1 id='info'>Info</h1><h2 id='get-info'>Get Info</h2><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">assetIssuer</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"deposit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"XRP"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="s2">"fee_fixed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"min_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fee_percent"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"withdraw"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"XRP"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"dest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"optional"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
              </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ripple Address"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"dest_extra"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"optional"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
              </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tag (Optional)"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"fee_fixed"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w">
      </span><span class="s2">"min_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fee_percent"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
      </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves basic info relating to the assets available via A3S for a specific issuing account.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET https://a3s.api.stellarport.io/v2/&lt;asset_issuer&gt;/info</code></p>
<h3 id='authorization-3'>Authorization</h3>
<ul>
<li>This endpoint is open to everyone.</li>
</ul>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_issuer</td>
<td>The public key of the issuing account on Stellar.</td>
</tr>
</tbody></table>
<h1 id='transactions'>Transactions</h1><h2 id='get-transactions'>Get Transactions</h2><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">paging_id</span><span class="p">:</span> <span class="s2">"234"</span><span class="p">,</span>
  <span class="na">no_older_than</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s1">'December 17, 1995 03:24:00'</span><span class="p">),</span>
  <span class="na">limit</span><span class="p">:</span> <span class="mi">25</span>
<span class="p">};</span>
<span class="kd">let</span> <span class="nx">transactions</span> <span class="o">=</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">transactions</span><span class="p">(</span><span class="nx">asset_code</span><span class="p">,</span> <span class="nx">asset_issuer</span><span class="p">,</span> <span class="nx">account</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"asset_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XRP"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount_out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-13T16:34:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-13T17:46:21.316Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"stellar_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9d489efe74c46f8d3e87765d8b30056b54472a743f0541fb189ed22920bab825"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC433768C3E7F1058852362B8E1D9F7F8E746326C38242F34E973AAFE3B88980"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rPFFGozFRSjbGTq8DwEWptTjGFRPqDtTtb?dt=5"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GCQLYUE2DJT3N57BKHKW5DUOELDSEHNGIVHVHFBS5YMDBZX55RTSR6FM"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deposit successfully completed."</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a list of transactions.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET https://a3s.api.stellarport.io/v2/&lt;asset_issuer&gt;/transactions</code></p>
<h3 id='authorization-4'>Authorization</h3>
<ul>
<li>Open to relay servers for transactions in their issued assets.</li>
<li>Open to users for transactions involving their accounts.</li>
</ul>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_issuer</td>
<td>The public key of the issuing account on Stellar.</td>
</tr>
</tbody></table>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC).</td>
</tr>
<tr>
<td>account</td>
<td>The id of the account to fetch transactions for.</td>
</tr>
<tr>
<td>paging_id (optional)</td>
<td>Id of the last transaction to exclude.</td>
</tr>
<tr>
<td>no_older_than (optional)</td>
<td>Only return transactions newer than.</td>
</tr>
<tr>
<td>limit (optional)</td>
<td>Number of transactions to return.</td>
</tr>
</tbody></table>
<h2 id='get-one-transaction'>Get One Transaction</h2><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="mi">32</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nx">instructions</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"asset_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XRP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount_out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-13T16:34:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-13T17:46:21.316Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"stellar_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9d489efe74c46f8d3e87765d8b30056b54472a743f0541fb189ed22920bab825"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"external_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC433768C3E7F1058852362B8E1D9F7F8E746326C38242F34E973AAFE3B88980"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rPFFGozFRSjbGTq8DwEWptTjGFRPqDtTtb?dt=5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GCQLYUE2DJT3N57BKHKW5DUOELDSEHNGIVHVHFBS5YMDBZX55RTSR6FM"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deposit successfully completed."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a specific transaction.</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET https://a3s.api.stellarport.io/v2/&lt;asset_issuer&gt;/transaction</code></p>
<h3 id='authorization-5'>Authorization</h3>
<ul>
<li>Open to relay servers for transactions in their issued assets.</li>
<li>Open to users for transactions involving their accounts.</li>
</ul>
<h3 id='url-parameters-4'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_issuer</td>
<td>The public key of the issuing account on Stellar.</td>
</tr>
</tbody></table>
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The id of the transaction</td>
</tr>
<tr>
<td>stellar_transaction_id</td>
<td>The Stellar transaction hash of the transactions</td>
</tr>
<tr>
<td>external_transaction_id</td>
<td>The external transaction id</td>
</tr>
</tbody></table>
<h1 id='deposit'>Deposit</h1><h2 id='get-deposit-instructions'>Get Deposit Instructions</h2><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">instructions</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">depositInstructions</span><span class="p">(</span><span class="nx">asset_code</span><span class="p">,</span> <span class="nx">asset_issuer</span><span class="p">,</span> <span class="nx">account</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"how"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rPFFGozFRSjbGTq8DwEWptTjGFRPqDtTtb?dt=5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"min_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"max_amount"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_fixed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_percent"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eta"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="s2">"extra_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Send XRP to ripple address rPFFGozFRSjbGTq8DwEWptTjGFRPqDtTtb. You MUST INCLUDE THE REQUIRED TAG 5 with the deposit"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves instructions on how to complete a deposit for a specific asset to a specific Stellar account.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET https://a3s.api.stellarport.io/v2/&lt;asset_issuer&gt;/deposit</code></p>
<h3 id='authorization-6'>Authorization</h3>
<ul>
<li>Open to relay servers for instructions in their issued assets.</li>
<li>Open to users for instructions for their account.</li>
</ul>
<h3 id='url-parameters-5'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_issuer</td>
<td>The public key of the issuing account on Stellar.</td>
</tr>
</tbody></table>
<h3 id='query-parameters-3'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
<tr>
<td>account</td>
<td>The destination Stellar account to send credit to.</td>
</tr>
<tr>
<td>memo (optional)</td>
<td>Memo to attach to the crediting transaction.</td>
</tr>
<tr>
<td>memo_type (optional)</td>
<td>Required if memo is specified.</td>
</tr>
</tbody></table>
<h2 id='notify-deposit-received'>Notify Deposit Received</h2><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">depositTransaction</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">depositSent</span><span class="p">(</span><span class="nx">reference</span><span class="p">,</span> <span class="nx">asset_code</span><span class="p">,</span> <span class="nx">asset_issuer</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending_external"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"asset_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-14T22:53:51.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"stellar_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"external_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf29d0ee54e02287ec10823f97db2eb7566e28fe48940d6abf512e146573d24e"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1CK6KHY6MHgYvmRQ4PAafKYDrg1ejbH1cE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GCQLYUE2DJT3N57BKHKW5DUOELDSEHNGIVHVHFBS5YMDBZX55RTSR6FM"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Waiting for external BTC deposit."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"extra_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Notifies A3S of an incoming deposit. This is almost always called by the relay server. The deposit does not yet need to be confirmed in order to make this call. It is best for a relay server to make this call as soon as it has spotted in incoming deposit.</p>

<p>If a deposit is not yet confirmed, A3S will store it as pending and will wait on confirmation before issuing any tokens on Stellar.</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET https://a3s.api.stellarport.io/v2/&lt;asset_issuer&gt;/deposit/sent</code></p>
<h3 id='authorization-7'>Authorization</h3>
<ul>
<li>Open to relay servers for deposits in their issued assets.</li>
</ul>
<h3 id='url-parameters-6'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_issuer</td>
<td>The public key of the issuing account on Stellar.</td>
</tr>
</tbody></table>
<h3 id='query-parameters-4'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
<tr>
<td>reference</td>
<td>Unique relay server reference</td>
</tr>
</tbody></table>
<h2 id='notify-deposit-confirmed'>Notify Deposit Confirmed</h2><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">depositTransaction</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">depositConfirmed</span><span class="p">(</span><span class="nx">reference</span><span class="p">,</span> <span class="nx">asset_code</span><span class="p">,</span> <span class="nx">asset_issuer</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"asset_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XRP"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-14T22:53:51.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-15T17:07:45.338Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"stellar_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e0f3a31292c805d2f7aa2540f64d92cd5159fb8d7df9404d4c5b3fd9faa4813b"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"external_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EB8A04D87FB6C767A76B0F2C07848BB522529EED48BDC38144EE3CCF3730502F"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rPFFGozFRSjbGTq8DwEWptTjGFRPqDtTtb?dt=5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GCQLYUE2DJT3N57BKHKW5DUOELDSEHNGIVHVHFBS5YMDBZX55RTSR6FM"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deposit successfully completed."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"extra_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Notifies A3S that a deposit has confirmed. Usually this is called by the relay server. Only use this after the <a href="#notify-deposit-sent">Notify Deposit Sent</a> endpoint.</p>

<p>In other words, this endpoint is only for a situation where a relay server has a deposit that it already notified A3S about that has now gone to <code>SUCCESS</code> from <code>PENDING</code>.</p>

<p>In cases where a relay server has a new deposit (that A3S does not yet know about), it can just call <a href="#notify-deposit-sent">Notify Deposit Sent</a> and A3S will issue tokens. In that case, there is no need to use this endpoint at all.</p>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>GET https://a3s.api.stellarport.io/v2/&lt;asset_issuer&gt;/deposit/confirmed</code></p>
<h3 id='authorization-8'>Authorization</h3>
<ul>
<li>Open to relay servers for deposits in their issued assets.</li>
</ul>
<h3 id='url-parameters-7'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_issuer</td>
<td>The public key of the issuing account on Stellar.</td>
</tr>
</tbody></table>
<h3 id='query-parameters-5'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
<tr>
<td>reference</td>
<td>Unique relay server reference</td>
</tr>
</tbody></table>
<h1 id='withdrawal'>Withdrawal</h1><h2 id='get-withdrawal-instructions'>Get Withdrawal Instructions</h2><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">dest_extra</span><span class="p">:</span> <span class="s1">'other_param'</span>
<span class="p">};</span>
<span class="kd">let</span> <span class="nx">instructions</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">withdrawalInstructions</span><span class="p">(</span><span class="nx">asset_code</span><span class="p">,</span> <span class="nx">asset_issuer</span><span class="p">,</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GCAANVYGJHG43WGHCM435FEJJZ3M4CYQ5JIYCNAR5ARIYAS3KRPEPZ4I"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"memo_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"memo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QytnaQ3iCZayKjTS0EKOznqBoEIM"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"min_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_fixed"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_percent"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eta"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="s2">"extra_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a set of instructions for the execution of a withdrawal.</p>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>GET https://a3s.api.stellarport.io/v2/&lt;asset_issuer&gt;/withdraw</code></p>
<h3 id='authorization-9'>Authorization</h3>
<ul>
<li>Open to relay servers for instructions in their issued assets.</li>
<li>Open to users for instructions for their account.</li>
</ul>
<h3 id='url-parameters-8'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_issuer</td>
<td>The public key of the issuing account on Stellar.</td>
</tr>
</tbody></table>
<h3 id='query-parameters-6'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
<tr>
<td>dest</td>
<td>The desired withdrawal destination</td>
</tr>
<tr>
<td>dest_extra (optional)</td>
<td>Another parameter to identify the withdrawal destination as required by <a href="#get-info">info</a></td>
</tr>
</tbody></table>
<h2 id='notify-withdrawal-sent'>Notify Withdrawal Sent</h2><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">depositTransaction</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">withdrawalSent</span><span class="p">(</span><span class="nx">tx_hash</span><span class="p">,</span> <span class="nx">op_order</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdrawal"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending_external"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"asset_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XRP"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.0000000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.72502625"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.27497375"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-15T18:13:28.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"stellar_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a34a69973e254c032061b4d2c85b47093738f7f13f9afdd4b3a5517919303472"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QytnaQ3iCZayKjTS0EKOznqBoEIM"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rNXEkKCxvfLcM1h4HJkaj2FtmYuAWrHGbf"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Waiting for external XRP withdrawal."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"extra_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Notifies A3S of an incoming withdrawal. This endpoint does not usually need to be called by anyone (as A3S autosenses incoming withdrawals).</p>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>GET https://a3s.api.stellarport.io/v2/withdraw/sent</code></p>
<h3 id='authorization-10'>Authorization</h3>
<ul>
<li>This endpoint is not open to the public currently (we may open it up in the future).</li>
</ul>
<h3 id='query-parameters-7'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_hash</td>
<td>The Stellar transaction hash of the withdrawal.</td>
</tr>
<tr>
<td>op_order</td>
<td>The operation order of the payment transaction.</td>
</tr>
</tbody></table>
<h2 id='notify-withdrawal-confirmed'>Notify Withdrawal Confirmed</h2><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">depositTransaction</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">withdrawalConfirmed</span><span class="p">(</span><span class="nx">reference</span><span class="p">,</span> <span class="nx">asset_code</span><span class="p">,</span> <span class="nx">asset_issuer</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"asset_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XRP"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-14T22:53:51.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-15T17:07:45.338Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"stellar_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e0f3a31292c805d2f7aa2540f64d92cd5159fb8d7df9404d4c5b3fd9faa4813b"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"external_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EB8A04D87FB6C767A76B0F2C07848BB522529EED48BDC38144EE3CCF3730502F"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rPFFGozFRSjbGTq8DwEWptTjGFRPqDtTtb?dt=5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GCQLYUE2DJT3N57BKHKW5DUOELDSEHNGIVHVHFBS5YMDBZX55RTSR6FM"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deposit successfully completed."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"extra_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Notifies A3S that a withdrawal has confirmed. Usually this is called by the relay server.</p>

<p>Often, after A3S notifies the relay server to execute a withdrawal via <a href="#send-withdrawal">Send Withdrawal</a>, it will get a <code>PENDING</code> response.</p>

<p>Once the withdrwaal successfully completes, the relay server should use this endpoint to notify A3S that a withdrawal is now confirmed.</p>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>GET https://a3s.api.stellarport.io/v2/&lt;asset_issuer&gt;/withdraw/confirmed</code></p>
<h3 id='authorization-11'>Authorization</h3>
<ul>
<li>Open to relay servers for withdrawals in their issued assets.</li>
</ul>
<h3 id='url-parameters-9'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_issuer</td>
<td>The public key of the issuing account on Stellar.</td>
</tr>
</tbody></table>
<h3 id='query-parameters-8'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
<tr>
<td>reference</td>
<td>Unique relay server reference to the withdrawal</td>
</tr>
</tbody></table>
<h1 id='relay-server-api'>Relay Server API</h1><h1 id='getting-started-2'>Getting Started</h1>
<p>If you are simply trying to interact with A3S and not actually run a relay server, you should never have to communicate with a relay server directly. This section is only for integrators who would like to run a relay server and interact with A3S so that they can bridge an asset to Stellar.</p>

<p>To get started building a relay server, you can check out our <a href="https://github.com/stellarport/relay-server-skeleton">relay-server-skeleton</a></p>
<h1 id='authentication-2'>Authentication</h1>
<blockquote>
<p>Verify an A3S request like this:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">require</span> <span class="p">{</span><span class="nx">A3S</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'a3s'</span>
<span class="kr">const</span> <span class="nx">a3s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A3S</span><span class="p">();</span>
<span class="nx">a3s</span>
  <span class="p">.</span><span class="nx">useProd</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">useAsRelay</span><span class="p">();</span>

<span class="nx">verificationResult</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">connectionManager</span><span class="p">.</span><span class="nx">verifyRequestByUriAndQuerySignature</span><span class="p">(</span><span class="nx">req</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">verificationResult</span> <span class="o">||</span> <span class="o">!</span><span class="nx">verificationResult</span><span class="p">.</span><span class="nx">verified</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Return 401 not authorized response.</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Verify a JSON web token like this:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">require</span> <span class="p">{</span><span class="nx">A3S</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'a3s'</span>
<span class="kr">const</span> <span class="nx">a3s</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A3S</span><span class="p">();</span>
<span class="nx">a3s</span>
  <span class="p">.</span><span class="nx">useProd</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">useAsRelay</span><span class="p">();</span>

<span class="nx">verificationResult</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">a3s</span><span class="p">.</span><span class="nx">connectionManager</span><span class="p">.</span><span class="nx">verifyRequestByJWT</span><span class="p">(</span><span class="nx">req</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">verificationResult</span> <span class="o">||</span> <span class="o">!</span><span class="nx">verificationResult</span><span class="p">.</span><span class="nx">verified</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Return 401 not authorized response.</span>
<span class="p">}</span>
</code></pre>
<p>A relay server should restrict its endpoints from public consumption. Most endpoints should only be accessible by A3S. Only the KYC endpoints should be accessible by the public in an authenticated fashion. KYC should only be allowed to requests including a JSON web token produced by A3S belonging to the correct account. </p>
<h1 id='kyc'>KYC</h1>
<p>A replay server can choose to add KYC requirements. In order to authenticate user requests for KYC upload, the relay server should verify the JSON web token on the request using the A3S SDK.</p>
<h2 id='upload-kyc'>Upload KYC</h2>
<p>Allows users to upload KYC information.</p>
<h3 id='http-request-12'>HTTP Request</h3>
<p><code>PUT https://your.relay.server/customer</code></p>
<h3 id='body-parameters-2'>Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account</td>
<td>The stellar account to add the KYC information for</td>
</tr>
<tr>
<td>memo_type</td>
<td>The stellar memo type to add the KYC information for</td>
</tr>
<tr>
<td>memo</td>
<td>The stellar memo to add the KYC information for</td>
</tr>
<tr>
<td>params</td>
<td>Additional params from the <a href="https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0009.md">sep9 superset</a> as required by the relay server.</td>
</tr>
</tbody></table>
<h2 id='delete-kyc'>Delete KYC</h2>
<p>Allows users to delete KYC information.</p>
<h3 id='http-request-13'>HTTP Request</h3>
<p><code>DELETE https://your.relay.server/customer/&lt;account&gt;</code></p>
<h3 id='url-parameters-10'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account</td>
<td>The stellar account to delete the KYC information for</td>
</tr>
</tbody></table>
<h1 id='deposit-2'>Deposit</h1><h2 id='deposit-destination'>Deposit Destination</h2>
<blockquote>
<p>If KYC is required, returns a 403 (Forbidden) with JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"non_interactive_customer_info_needed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"family_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"given_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"address"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>On success, returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unique_destination_reference"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Generates a new unique deposit destination and returns the reference. The reference should be a string that a user will recognize as identifying a particular destination.</p>

<p>If KYC is required, should return the fields that are required from the <a href="https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0009.md">sep9 superset</a></p>
<h3 id='http-request-14'>HTTP Request</h3>
<p><code>GET https://your.relay.server/deposit/destination</code></p>
<h2 id='deposit-instructions'>Deposit Instructions</h2>
<blockquote>
<p>If KYC is required, returns a 403 (Forbidden) with JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"non_interactive_customer_info_needed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"family_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"given_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"address"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>On success, returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"min_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_fixed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_percent"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eta"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="err">//seconds</span><span class="p">,</span><span class="w">
  </span><span class="s2">"how"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rNXEkKCxvfLcM1h4HJkaj2FtmYuAWrHGbf?dt=88"</span><span class="p">,</span><span class="w"> </span><span class="err">//concise</span><span class="w"> </span><span class="err">deposit</span><span class="w"> </span><span class="err">destination</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Send XRP to ripple address rNXEkKCxvfLcM1h4HJkaj2FtmYuAWrHGbf. You MUST INCLUDE THE REQUIRED TAG 88 with the deposit"</span><span class="w"> </span><span class="err">//expanded</span><span class="w"> </span><span class="err">deposit</span><span class="w"> </span><span class="err">details</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a set of corresponding instructions for a specific deposit destination.</p>

<p>If KYC is required, should return the fields that are required from the <a href="https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0009.md">sep9 superset</a></p>
<h3 id='http-request-15'>HTTP Request</h3>
<p><code>GET https://your.relay.server/deposit/instructions</code></p>
<h3 id='query-parameters-9'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
<tr>
<td>reference</td>
<td>The deposit destination string generated by <a href="#deposit-destination">deposit destination</a>.</td>
</tr>
</tbody></table>
<h2 id='get-deposit'>Get Deposit</h2>
<blockquote>
<p>Returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EB8A04D87FB6C767A76B0F2C07848BB522529EED48BDC38144EE3CCF3730502F"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">incomplete</span><span class="w"> </span><span class="err">transaction</span><span class="w">
  </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XRP"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PENDING"</span><span class="p">,</span><span class="w"> </span><span class="err">//PENDING</span><span class="p">,</span><span class="w"> </span><span class="err">SUCCESS</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">ERROR</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEPOSIT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rPFFGozFRSjbGTq8DwEWptTjGFRPqDtTtb?dt=5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a specific deposit. This endpoint is used by A3S to confirm an incoming deposit.</p>

<aside class="notice">
There are two identifying properties on a deposit and withdrawal from a relay server,namely <code>id</code> and <code>reference</code>. <code>id</code> is the property that is viewable in the external system (e.g. a bitcoin transaction hash). Sometimes, an id may be null on an icomplete transaction. A reference MUST be specified. It is the relay server's reference to the transaction.
</aside>
<h3 id='http-request-16'>HTTP Request</h3>
<p><code>GET https://your.relay.server/deposit</code></p>
<h3 id='query-parameters-10'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
</tbody></table>
<h1 id='withdrawal-2'>Withdrawal</h1><h2 id='withdrawal-destination'>Withdrawal Destination</h2>
<blockquote>
<p>If KYC is required, returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"non_interactive_customer_info_needed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"family_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"given_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"address"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>On success, returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unique_destination_reference"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a withdrawal reference for a withdrawal destination. Should return a <code>200</code> status code if the destination is valid, otherwise a <code>400</code> status code if the destination parameters are invalid, incomplete or missing with a <code>message</code> field as to what is incorrect.</p>

<p>If KYC is required, should return the fields that are required from the <a href="https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0009.md">sep9 superset</a></p>
<h3 id='http-request-17'>HTTP Request</h3>
<p><code>GET https://your.relay.server/withdraw/destination</code></p>
<h3 id='query-parameters-11'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
<tr>
<td>dest</td>
<td>The dest as specified in <a href="#get-info">info</a></td>
</tr>
<tr>
<td>other parameters</td>
<td>Other variable parameters as specified in <a href="#get-info">info</a></td>
</tr>
</tbody></table>
<h2 id='withdrawal-instructions'>Withdrawal Instructions</h2>
<blockquote>
<p>If KYC is required, returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"non_interactive_customer_info_needed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"family_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"given_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"address"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>On success, returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"min_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_fixed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_percent"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eta"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="err">//seconds</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some details about your upcoming withdrawal"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns withdrawal instructions for a withdrawal destination references as generated by <a href="#withdrawal-destination">withdrawal destination</a>.</p>

<p>If KYC is required, should return the fields that are required from the <a href="https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0009.md">sep9 superset</a></p>
<h3 id='http-request-18'>HTTP Request</h3>
<p><code>GET https://your.relay.server/withdraw/instructions</code></p>
<h3 id='query-parameters-12'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
<tr>
<td>reference</td>
<td>The deposit destination string generated by <a href="#deposit-destination">deposit destination</a>.</td>
</tr>
</tbody></table>
<h2 id='get-withdrawal'>Get Withdrawal</h2>
<blockquote>
<p>Returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x2d746897195119a308d7c840f75c0a0f2c54ceb00cb78a0661516ba93ee29ad4"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WITHDRAWAL"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xec0a404aaa8ca1746b5c1cbe7c99e553f96463f0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"anchorTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00397502625"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdTms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-11T21:35:09.184Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a withdrawal.</p>
<h3 id='http-request-19'>HTTP Request</h3>
<p><code>GET https://your.relay.server/withdrawal</code></p>
<h3 id='url-parameters-11'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
</tbody></table>
<h2 id='send-withdrawal'>Send Withdrawal</h2>
<blockquote>
<p>Returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">incomplete</span><span class="w"> </span><span class="err">transaction</span><span class="w">
  </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XRP"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PENDING"</span><span class="p">,</span><span class="w"> </span><span class="err">//PENDING</span><span class="p">,</span><span class="w"> </span><span class="err">SUCCESS</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">ERROR</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WITHDRAWAL"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rNXEkKCxvfLcM1h4HJkaj2FtmYuAWrHGbf"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.720032"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Sends a withdrawal.</p>
<h3 id='http-request-20'>HTTP Request</h3>
<p><code>GET https://your.relay.server/withdraw/send</code></p>
<h3 id='url-parameters-12'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset_code</td>
<td>The code of the asset being deposited (e.g. BTC)</td>
</tr>
<tr>
<td>transaction_id</td>
<td>The transaction_id on A3S that should be executed by the relay server</td>
</tr>
</tbody></table>

<aside class="info">
Only the transaction id is passed to this endpoint on purpose. The relay server is expected to go back and fetch the transaction from A3S and confirm its authenticity before proceeding with the withdrawal.
</aside>
<h1 id='errors'>Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified resource could not be found.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;ve requested too many times! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
